"use strict";(self.webpackChunknodebucket=self.webpackChunknodebucket||[]).push([[919],{4919:(b,c,r)=>{r.r(c),r.d(c,{SecurityModule:()=>y});var l=r(6814),a=r(2129),t=r(4769);let m=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-security"]],decls:1,vars:0,template:function(i,n){1&i&&t._UZ(0,"router-outlet")},dependencies:[a.lC],encapsulation:2})}return e})();var o=r(95),g=r(459),u=r(9862);let p=(()=>{class e{constructor(s){this.http=s}findEmployeeById(s){return this.http.get("/api/employees/"+s)}static#t=this.\u0275fac=function(i){return new(i||e)(t.LFG(u.eN))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function h(e,k){if(1&e&&(t.TgZ(0,"div",14),t._uU(1),t.qZA()),2&e){const s=t.oxw();t.xp6(1),t.hij(" ",s.errorMessage," ")}}const f=[{path:"",component:m,title:"Nodebucket: Security",children:[{path:"signin",component:(()=>{class e{constructor(s,i,n,d,S){this.fb=s,this.router=i,this.cookieService=n,this.securityService=d,this.route=S,this.isLoading=!1,this.signinForm=this.fb.group({empId:[null,o.kI.compose([o.kI.required,o.kI.pattern("[0-9]*$")])]}),this.sessionUser={},this.errorMessage=""}signin(){this.isLoading=!0,console.log("signinForm",this.signinForm.value);const s=this.signinForm.controls.empId.value;if(console.log(s),!s||isNaN(parseInt(s,10)))return this.errorMessage="The employee ID is invalid, please try again.",void(this.isLoading=!1);this.securityService.findEmployeeById(s).subscribe({next:i=>{console.log("employee",i),this.sessionUser=i,this.cookieService.set("session_user",s,1),this.cookieService.set("session_name",`${i.firstName} ${i.lastName}`,1);const n=this.route.snapshot.queryParamMap.get("returnUrl")||"/tasks";this.isLoading=!1,this.router.navigate([n])},error:i=>{this.isLoading=!1,this.errorMessage=i.error.message?i.error.message:i.message}})}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(o.qu),t.Y36(a.F0),t.Y36(g.N),t.Y36(p),t.Y36(a.gz))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-signin"]],decls:20,vars:2,consts:[[1,"container-fluid","full-height",2,"height","100%","min-height","600px","background-color","#0e1a40"],[1,"row","justify-content-center","mt-5",2,"padding-top","15%"],[1,"col-lg-4","col-md-6","col-sm-6"],[1,"card","shadow",2,"background-color","#946b2d"],[1,"card-title","text-center","border-bottom"],[1,"p-3"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"card-body"],[3,"formGroup","ngSubmit"],["for","empId",1,"form-label"],["type","text","id","empId","formControlName","empId",1,"form-control"],[1,"d-grid"],["type","submit",1,"btn","btn-info",2,"background-color","#5d5d5d","border-color","#0e1a40","color","#0e1a40"],["routerLink","/",1,"text-dark"],["role","alert",1,"alert","alert-danger"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),t._uU(6,"Employee Sign In"),t.qZA()(),t.YNc(7,h,2,1,"div",6),t.TgZ(8,"div",7)(9,"form",8),t.NdJ("ngSubmit",function(){return n.signin(),n.signinForm.reset()}),t.TgZ(10,"div")(11,"label",9),t._uU(12,"Employee ID"),t.qZA(),t._UZ(13,"input",10),t.qZA(),t._UZ(14,"br"),t.TgZ(15,"div",11)(16,"button",12),t._uU(17," Sign In "),t.qZA()()()()(),t.TgZ(18,"a",13),t._uU(19,"Return"),t.qZA()()()()),2&i&&(t.xp6(7),t.Q6J("ngIf",n.errorMessage),t.xp6(2),t.Q6J("formGroup",n.signinForm))},dependencies:[l.O5,a.rH,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u]})}return e})(),title:"Nodebucket: Signin"}]}];let v=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275mod=t.oAB({type:e});static#i=this.\u0275inj=t.cJS({imports:[a.Bz.forChild(f),a.Bz]})}return e})(),y=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275mod=t.oAB({type:e});static#i=this.\u0275inj=t.cJS({imports:[l.ez,v,o.u5,o.UX,u.JF]})}return e})()}}]);